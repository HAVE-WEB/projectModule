<!doctype html>
<html class="no-js">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>新增收货地址</title>

    <!-- Set render engine for 360 browser -->
    <meta name="renderer" content="webkit">

    <!-- No Baidu Siteapp-->
    <meta http-equiv="Cache-Control" content="no-siteapp"/>

    <link rel="icon" type="image/png" href="i/favicon.png">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="192x192" href="i/app-icon72x72@2x.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Amaze UI"/>
    <link rel="apple-touch-icon-precomposed" href="i/app-icon72x72@2x.png">

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="i/app-icon72x72@2x.png">
    <meta name="msapplication-TileColor" content="#0e90d2">

    <!-- Amaze UI CSS -->
    <link rel="stylesheet" href="../../assets/css/amazeui.css">
    <link rel="stylesheet" href="../../assets/css/sl.css">
    <link rel="stylesheet" href="../../assets/css/picker.css">
    <script src="../../assets/js/jquery.min.js"></script>
    <script src="../../assets/js/amazeui.js"></script>
    <script src="../../assets/js/myFirst.js"></script>
    <script src="../../assets/js/picker.js"></script>
    <script src="../../assets/js/data/city.js"></script>
    <style>
        div.am-tabs-bd button{
            /*border: 6px solid red;*/
            padding: 0.2rem 0.6rem;
            color: white;
            background-color: red;
            /*-webkit-border-radius: 2px;*/
            /*-moz-border-radius: 2px;*/
            /*border-radius: 0.8rem;*/
        }

        ::-webkit-scrollbar{
            width: 0.1rem;
        }
        input:focus{
            outline:0px auto -webkit-focus-ring-color ;
        }

    </style>

</head>
<body style="background-color: #EEEEF3">
<div class="top-div" style="width: 100%;position:fixed;top: 0px;left: 0px;z-index: 10001">
    <div class="sl-flex-row-center-flex-start " style="background-color: red;height: 3rem;padding-left: 0.8rem;">
        <img src="../../assets/images/back.png" alt="" style="width: 1.5rem;height: 1.5rem;" onclick="goBack()">
        <div style="color: white;" class="title">新增收货地址</div>
    </div>
</div>
<div style="margin-top: 3rem;background-color:white;">
    <form id="address" action="action" method="POST" role="form" class="">
        <div  class="sl-border-bottom-1px-solid-D3D3D3 sl-padding-08rem-04rem sl-width-percent100 sl-border-shadow">
            <input type="text" placeholder="请输入收件人姓名" name="userName" class="sl-width-percent100" style="-webkit-box-shadow: none;-moz-box-shadow: none ;box-shadow: none ;" required>
        </div>
        <div  class="sl-border-bottom-1px-solid-D3D3D3 sl-padding-08rem-04rem sl-width-percent100">
            <input type="number" placeholder="请输入手机号码" name="iphone" class="sl-width-percent100 js-pattern-key2" style="-webkit-box-shadow: none;-moz-box-shadow: none ;box-shadow: none ;"  required>
        </div>
        <div  class="sl-border-bottom-1px-solid-D3D3D3 sl-padding-08rem-04rem sl-width-percent100 sl-flex-row-center-space-between">
            <input type="text" placeholder="请选择省市区"  name="address" class="sl-width-percent100" style="-webkit-box-shadow: none;-moz-box-shadow: none ;box-shadow: none ;" onclick="pickerAddress(this)" readonly required>
            <img src="../../assets/images/方向右.png" alt="" style="width: 1rem;height: 1rem;">
        </div>
        <!--<div  class="sl-border-bottom-1px-solid-D3D3D3 sl-padding-08rem-04rem sl-width-percent100 sl-flex-row-center-space-between">-->
        <!--<input type="text" placeholder="街道" class="sl-width-percent100" maxlength="11" readonly>-->
        <!--<img src="../assets/images/方向右.png" alt="" style="width: 1rem;height: 1rem;">-->
        <!--</div>-->
        <div  class="sl-border-bottom-1px-solid-D3D3D3 sl-padding-08rem-04rem sl-width-percent100">
            <input type="number" placeholder="请输入邮政编码" name="postCode" class="sl-width-percent100 js-pattern-key1" style="-webkit-box-shadow: none;-moz-box-shadow: none ;box-shadow: none ;" required size="6">
        </div>
        <div  class="sl-border-bottom-1px-solid-D3D3D3 sl-padding-08rem-04rem sl-width-percent100">
            <textarea name="" id="" cols="10" rows="5" placeholder="请输入详细地址" name="detailAddress" class="sl-width-percent100" style="-webkit-box-shadow: none;-moz-box-shadow: none ;box-shadow: none ;" required></textarea>
        </div>

        <button type="submit" class="sl-bottomNav sl-margin-top-3rem">提交</button>
    </form>

</div>
<!--<div id="bottomNav" style="width: 100%;" class="sl-flex-row-center-space-between">-->
    <!--<div class="sl-bottomNav" >-->
        <!--<span>保存</span>-->
    <!--</div>-->
<!--</div>-->

<div class="am-modal am-modal-confirm" tabindex="-1" id="my-confirm">
    <div class="am-modal-dialog">
        <div class="am-modal-hd">提示</div>
        <div class="am-modal-bd">
            确定要提交此收货地址吗？
        </div>
        <div class="am-modal-footer">
            <span class="am-modal-btn" data-am-modal-cancel>取消</span>
            <span class="am-modal-btn" data-am-modal-confirm>确定</span>
        </div>
    </div>
</div>





</body>
</html>
<script>
    //全局变量
    var rem = new Rem();
    var num = 0;
    var numKC = 0;
    //地址列表点击编辑
    $(function () {
        var arrKey = ['userName','iphone','address','detailAddress'];
        for(var i = 0;i < arrKey.length; i++){
            if(arrKey[i] === 'detailAddress'){
                var k = arrKey[i];
                console.log(k);
                $('textarea').val(sessionStorage.getItem(arrKey[i]));
            }else{
                $('input[name = "'+arrKey[i]+'"]').val(sessionStorage.getItem(arrKey[i]));
            }

        }
    });

    //validator验证
    $(function() {
        $('#address').validator({
            patterns: {
                key1:/^\d{6}$/,
                key2:/^1[3|4|5|7|8][0-9]{9}$/,
            },
            onValid: function(validity) {
            },
            onInValid: function(validity) {
                var $field = $(validity.field);
                // 使用自定义的提示信息 或 插件内置的提示信息
                var msg='';
                console.log(validity);
                if(validity.valueMissing){
                    msg = $field.prop('placeholder');
                }
                if(validity.typeMismatch){
                    msg='你输入的不是数字';
                }
                if(validity.patternMismatch){
                    var n = $field.attr('name');
                    if(n === 'postCode'){
                        msg='请输入6位邮编号码';
                    }else if(n === 'iphone'){
                        msg='手机号码不正确';
                    }
                }
                if(validity.rangeUnderflow || validity.rangeOverflow){
                    msg = this.getValidationMessage(validity);
                }
                if(msg === ''){
                    msg = this.getValidationMessage(validity);
                }
                rem.alertInfo(msg);
            },
            submit: function (e) {
                var formValidity = this.isFormValid();
                if(typeof formValidity === 'boolean'){
                    if(formValidity){
                        e.preventDefault();
                        sessionStorage.setItem('bottomNavIndex',0);
                        $("#my-confirm").modal({
                            onConfirm: function () {
//                                var arr = ['activityType','isUseGovMoney','activityBranch','meetingRecord'];
//                                for(var i =0;i < arr.length; i++){
//                                    sessionStorage.removeItem(arr[i]);
//                                }
                                history.back();
                            },
                            onCancel: function () {
                                return false;
                            }
                        });
                    }else{
                        return false;
                    }
                }else{
                }
            }
        });
    });

    //标题文字居中
    $(function () {
        rem.titleCenter();
        rem.bottomNavFixed($('#bottomNav'));
    });
    //
    function goBack() {
        history.back();
    }
    //选择省市区控件
    function pickerAddress(self) {
        var address = self;
        new Picker({
            "title": '请选择',//标题(可选)
            "defaultValue": address.value,//默认值-多个以空格分开（可选）
            "data": cityData,//数据(必传)
            "keys": {
                "id": "Code",
                "value": "Name",
                "childData": "level"//最多3级联动
            },//数组内的键名称(必传，id、text、data)
            "callBack": function (val) {
                //回调函数（val为选择的值）
                address.value = val;
            }
        });
    }
</script>